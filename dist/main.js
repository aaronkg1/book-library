(()=>{class e{constructor(e,t,d,i){this.title=e,this.author=t,this.pages=d,this.read=i,this.addedToLibrary=!1}info(){return title+" by "+author+", "+pages+" pages,"+read}toggleRead(){"Yes"===this.read?this.read="No":this.read="Yes"}toggleAddedToLibrary(){this.addedToLibrary=!0}}class t{constructor(e){this.name=e,this.library=[]}addBookToLibrary(t,d,i,a){this.library.push(new e(t,d,i,a))}removeBookFromLibrary(e){this.library.splice(e,1)}}(()=>{const e=document.querySelector("form"),d=document.querySelector("#title"),i=document.querySelector("#author"),a=document.querySelector("#pages"),r=document.querySelector("#has-read"),o=document.querySelector("#add-book"),l=document.querySelector(".library"),s=document.querySelector("#new-book"),n=document.querySelector(".popup"),c=document.querySelector("#return"),u=new t("myLibrary");o.addEventListener("click",(()=>{m()})),s.addEventListener("click",(()=>{n.classList.toggle("visible")})),c.addEventListener("click",(()=>{n.classList.toggle("visible"),e.reset()}));const m=()=>{d.checkValidity(),d.setCustomValidity(""),(d.validity.valid?(i.checkValidity(),i.setCustomValidity(""),i.validity.valid?(a.checkValidity(),a.setCustomValidity(""),a.validity.valid||(a.setCustomValidity("Number of pages required"),a.reportValidity(),0)):(i.setCustomValidity("Book Author Required"),i.reportValidity(),0)):(d.setCustomValidity("Book Title Required"),d.reportValidity(),0))&&(r.checked?read="Yes":read="No",u.addBookToLibrary(`${d.value}`,`${i.value}`,`${a.value}`,read),y(),n.classList.toggle("visible"),e.reset())},y=()=>{u.library.forEach((e=>{if(1!=e.addedToLibrary){let t=document.createElement("div");t.classList.add("book");let d=document.createElement("h2"),i=document.createElement("p"),a=document.createElement("p"),r=document.createElement("p"),o=document.createElement("span"),s=document.createElement("div"),n=document.createElement("div"),c=document.createElement("div"),m=document.createElement("div"),p=document.createElement("div"),h=document.createElement("div");n.classList.add("section"),c.classList.add("section"),m.classList.add("section"),p.classList.add("section"),h.classList.add("section"),t.appendChild(n),n.appendChild(d),t.appendChild(c),c.appendChild(i),t.appendChild(m),m.appendChild(a),t.appendChild(p),p.appendChild(r),t.appendChild(h),h.appendChild(o),h.appendChild(s),"Yes"===e.read&&t.classList.add("read"),d.textContent=`Title: ${e.title}`,i.textContent=`Author: ${e.author}`,a.textContent=`Pages: ${e.pages}`,r.textContent=`Read: ${e.read}`,o.classList.add("material-icons-outlined"),o.textContent="delete",s.classList.add("material-icons-outlined"),s.textContent="auto_stories",l.appendChild(t),e.toggleAddedToLibrary(),t.index=u.library.indexOf(e),o.addEventListener("click",(()=>{u.removeBookFromLibrary(t.index),l.removeChild(t),y()})),s.addEventListener("click",(()=>{e.toggleRead(),r.textContent=`Read: ${e.read}`,t.classList.toggle("read")}))}}))}})()})();